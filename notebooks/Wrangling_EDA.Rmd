---
title: "R Notebook"
output: html_notebook
author: Marco Polo Bravo Montiel
date: 2020-04-21
---

### Libraries

```{r}
if (!require("renv")) install.packages("renv")
library(renv)
renv::restore()
library(here)
library(dplyr)
library(readr)
```

### Read data

```{r}
zip_file <- here("data", "raw", "iter_00_cpv2020_csv.zip")
```

```{r}
temp_dir <- here("temp")
dir.create(temp_dir, showWarnings = FALSE)

unzip(zip_file, files = c("iter_00_cpv2020/conjunto_de_datos/conjunto_de_datos_iter_00CSV20.csv", "iter_00_cpv2020/diccionario_datos/diccionario_datos_iter_00CSV20.csv"), exdir = temp_dir)
```

```{r}

data_path <- here(temp_dir,
                 "iter_00_cpv2020",
                 "conjunto_de_datos",
                 "conjunto_de_datos_iter_00CSV20.csv")

dict_path <- here(temp_dir,
                 "iter_00_cpv2020",
                 "diccionario_datos",
                 "diccionario_datos_iter_00CSV20.csv")

info_dict <- read_csv(dict_path)
df <- read_csv(data_path)


unlink(temp_dir, recursive = TRUE)
```

```{r}
# Exporting dictionary file
write_csv(info_dict,
          here("data", "raw", "diccionario_datos_iter_00CSV20.csv"))

```

### Exploration

```{r}
head(df)
head(info_dict)
```

```{r}
clean_info_dict <- info_dict[-c(1:3), ]
clean_info_dict
```
